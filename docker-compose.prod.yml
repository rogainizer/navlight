services:
  navlight-backend:
    image: ghcr.io/rogainizer/navlight-backend:${NAVLIGHT_BACKEND_TAG:-latest}
    container_name: navlight-backend
    restart: unless-stopped
    env_file:
      - ./deploy/.env.production
    environment:
      NODE_ENV: production
      PORT: 3001
      DB_HOST: db
      DB_PORT: 3306
      DB_USER: root
      DB_NAME: navlight 
    expose:
      - "3001"
    networks:
      - proxy

  navlight-frontend:
    image: ghcr.io/rogainizer/navlight-frontend:${NAVLIGHT_FRONTEND_TAG:-latest}
    container_name: navlight-frontend
    restart: unless-stopped
    depends_on:
      - navlight-backend
    networks:
      - proxy

networks:
  proxy:
    external: true
    name: rogainizer-proxy
